### 싱글톤 레지스트리

- 싱글톤 레지스트리는 디자인 패턴 중 하나인 싱글톤 패턴의 구현 방식을 보완한 기능으로 직접 싱글톤 형태의 오브젝트를 만들고 관리하는 기능
- 스프링은 기본적으로 별다른 설정이 없다면 내부에서 생성하는 빈 오브젝트를 모두 싱글톤으로 만들기 때문에 같은 객체를 여러번 호출해도 동일한 객체를 반환
- **싱글톤 패턴의 문제점**
    - 싱글톤 패턴은 생성자를 private으로 제한, private 생성자를 가진 클래스는 객체지향의 장점인 상속과 이를 이용한 다형성을 적용할 수 없음
    - 싱글톤은 초기화 과정에서 생성자 등을 통해 사용할 오브젝트를 직접 주입하기도 힘들기 때문에 필요한 오브젝트는 직접 오브젝트를 만들어 사용할 수 밖에 없음
        - 테스트용 오브젝트로 대체하기가 힘듦
    - 여러 개의 JVM에 분산돼서 설치가 되는 경우에도 각각 독립적으로 오브젝트가 생기기 때문에 싱글톤으로서의 가치를 보장하지 못함
    - 싱글톤의 static 메소드를 이용해 언제든지 싱글톤에 접글할 수 있어 전역 상태로 사용될 수 있음
    - 예시코드

        ```java
        class suvCar {

           private static final INSTANCE = new suvCar();

           private static suvCar getInstance() { return INSTANCE; }

           private suvCar(){}

        }
        ```

- 싱글톤 레지스트리는 private 생성자를 사용해야 하는 방법이 아닌 평범한 자바 클래스를 싱글톤으로 활용할 수 있게 해줌
- IoC 방식의 컨테이너를 사용해서 생성과 관계설정, 사용 등에 대한 제어권을 컨테이너에게 넘기면서 손쉽게 싱글톤 방식으로 관리
- 주의점
    - 무상태(stateless)로 설계해야 함
        - 특정 클라이언트에 의존적인 필드가 있으면 안됨
        - 특정 클라이언트가 값을 변경할 수 있는 필드가 있으면 안됨
        - 가급적 읽기만 가능해야 함
        - 필드 대신에 자바에서 공유되지 않는, 지역변수, 파라미터, ThreadLocal 등을 사용해야 함
